<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chapter 2 – Echo of the Heart</title>
<link rel="stylesheet" href="style.css">
</head>
<body style="background-image: url('images/chapter2-bg.jpg');">
<div class="overlay"></div>
<div class="content">
  <h1>Chapter 2: Echo of the Heart</h1>
  <p id="story"></p>

  <div id="puzzle" style="display:none;">
    <p><b>Puzzle:</b> Kalpana finds a glowing shard that hums in rhythm.  
    Three knocks, then silence.  
    <br>Decode the sequence: ❤️ ❤️ ❤️ … ?  
    (Enter the missing word)</p>
    <input id="answer" placeholder="Your answer...">
    <button onclick="check()">Submit</button>
    <p id="result"></p>
  </div>

  <button id="restart" onclick="restartGame()">Restart</button>
</div>

<script>
const story = [
  "Beyond the mirror, a hallway stretches endlessly.",
  "Each step she takes echoes like a heartbeat — familiar, human.",
  "On the wall, the words shimmer: 'The heart remembers what the mind forgets.'",
  "Somewhere, faintly, a voice whispers her name… ‘Kalpana…’"
];

let i = 0, storyEl = document.getElementById('story');
function type() {
  if (i < story.length) {
    storyEl.innerHTML += `<p>${story[i]}</p>`;
    i++;
    setTimeout(type, 1700);
  } else {
    document.getElementById('puzzle').style.display = 'block';
  }
}

function check() {
  const ans = document.getElementById("answer").value.toLowerCase().trim();
  if (ans === "silence") {
    document.getElementById("result").innerText = "The hallway hums — the next door unlocks.";
    localStorage.setItem("mirror-progress", "chapter3");
    setTimeout(() => window.location.href = "chapter3.html", 2500);
  } else {
    document.getElementById("result").innerText = "The shard dims...";
  }
}

function restartGame() {
  localStorage.clear();
  window.location.href = "index.html";
}

window.onload = type;
</script>
</body>
</html>
