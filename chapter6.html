<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Chapter 6 — The Final Reflection</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500&family=Crimson+Text&display=swap" rel="stylesheet">
  <style>
    body {
      background: url('images/chapter6-bg.jpg') center/cover fixed no-repeat;
      font-family: 'Crimson Text', serif;
      color: #ff2e2e;
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }
    .page-wrap {
      width: 100%;
      text-align: center;
    }
    .panel {
      background: rgba(40, 40, 40, 0.15);
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 0 20px rgba(255, 0, 0, 0.3);
      max-width: 80%;
      margin: auto;
    }
    .h-title {
      font-family: 'Cinzel', serif;
      font-size: 2rem;
      margin-bottom: 20px;
      text-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
    }
    .typewriter {
      font-size: 1.2rem;
      line-height: 1.8;
      white-space: pre-line;
      min-height: 120px;
    }
    .choice-row {
      margin-top: 30px;
    }
    .choice {
      background: rgba(255, 0, 0, 0.2);
      border: 1px solid #ff2e2e;
      color: #ff2e2e;
      padding: 10px 25px;
      border-radius: 10px;
      font-size: 1rem;
      cursor: pointer;
      margin: 10px;
      transition: 0.3s;
    }
    .choice:hover {
      background: #ff2e2e;
      color: black;
    }
    #final-msg {
      font-size: 1rem;
      margin-top: 14px;
    }
  </style>
</head>

<body>
  <div class="page-wrap">
    <div class="panel" role="main">
      <h1 class="h-title">Chapter 6 — The Final Reflection</h1>
      <div id="story" class="typewriter"></div>

      <div class="choice-row">
        <button class="choice" onclick="handleChoice('touched')">Touch the Mirror</button>
        <button class="choice" onclick="handleChoice('broken')">Break the Mirror</button>
      </div>

      <div id="final-msg" class="small"></div>
    </div>
  </div>

  <script>
    const txt6 = `The mansion grows still.
Every mirror lights up — hundreds of reflections staring back at her, whispering fragments of her journey.
Heart. Silence. Memory. Light. Bharath.

The final mirror stands alone, untouched.
Inside it, Kalpana sees not herself... but Bharath — reaching toward her, eyes gentle, as if waiting.

The glass hums, vibrating between creation and destruction.
If she touches it, she might cross over and find peace.
If she breaks it, she may free herself... but lose him forever.

The choice is hers — to touch, or to break the final reflection.`;

    // Typewriter effect
    let i = 0;
    function typeWriter(text, id, speed, callback) {
      const el = document.getElementById(id);
      if (i < text.length) {
        el.innerHTML += text.charAt(i);
        i++;
        setTimeout(() => typeWriter(text, id, speed, callback), speed);
      } else if (callback) callback();
    }
    typeWriter(txt6, 'story', 30);

    // Choice logic
    function handleChoice(action) {
      const msg = document.getElementById("final-msg");
      if (action === 'touched') {
        msg.innerHTML = "The mirror glows... You feel warmth flood your heart.";
        setTimeout(() => { window.location.href = "ending.html"; }, 4000);
      } else {
        msg.innerHTML = "The mirror shatters into silence. A shadow slips away...,\n Thanks for everything you gave me and bye...,\n If you ever need me in any situation, i'm just a call or text away.";
      }
    }

    // Optional: Save progress (if script.js supports it)
    function saveProgress(chapter) {
      localStorage.setItem('lastChapter', chapter);
    }
  </script>
</body>
</html>
