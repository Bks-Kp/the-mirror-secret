<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Chapter 6 — The Final Reflection</title>
  <link rel="stylesheet" href="style.css">
</head>
<body style="background: url('images/chapter6-bg.jpg') center/cover fixed no-repeat;">
  <div class="page-wrap">
    <div class="panel" role="main">
      <h1 class="h-title">Chapter 6 — The Final Reflection</h1>

      <div id="story" class="typewriter"></div>

      <div class="choice-row">
        <button class="choice" onclick="(function(){ saveProgress('chapter6'); finalize('touched'); })()">Touch the Mirror</button>
        <button class="choice" onclick="(function(){ saveProgress('chapter6'); finalize('broken'); })()">Break the Mirror</button>
      </div>

      <div id="final-msg" class="small" style="margin-top:14px"></div>
    </div>
  </div>

  <script src="script.js"></script>
  <script>
    const txt6 = `
The mirror quivers — its cracks glowing with crimson warmth.
Every reflection you faced, every truth you chose, begins to converge.

Through the trembling glass, a familiar silhouette appears — calm, waiting, watching.
The whispers of the mansion fade into a single heartbeat.
The voice says softly: "Your heart was never lost, Kalpana... only hidden."

You feel the air still, your reflection gazing back with quiet strength.
A stitched name glows at the center of the mirror — *Bharath*.
It waits for your final choice.
`;

    // Typewriter + on-finish callback
    typeWriter(txt6, 'story', 28, ()=> saveProgress('chapter6'));

    function finalize(choice) {
      const msg = document.getElementById("final-msg");
      if (choice === 'touched') {
        msg.innerHTML = "The mirror melts into light, and your reflection smiles back. You are free.";
        setTimeout(() => window.location.href = "ending.html", 3000);
      } else if (choice === 'broken') {
        msg.innerHTML = "The mirror shatters — silence swallows the room. Yet a faint glow remains... the story incomplete.";
        setTimeout(() => window.location.href = "ending.html", 4000);
      }
    }
  </script>
</body>
</html>
